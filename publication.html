<!-- 页面标题 -->
<h2 style="margin: 2px 0px -10px; font-size: 30px; text-align: center;">
  <a style="text-decoration: none; color: inherit;">Publications</a>
</h2>

<!-- 返回按钮 -->
<div style="position: absolute; top: 20px; left: 18%;">
  <button onclick="window.location.href='.'"
          style="background-color: #e0e0e0; border: none; border-radius: 8px; padding: 10px 15px; font-size: 15px; cursor: pointer;">
    Back
  </button>
</div>

<br>

<!-- 作者标注说明：用于标明通讯作者和共同一作 -->
<div style="text-align: center; font-size: 15px; color: #666; margin-top: 4px;">
  <span>* Corresponding author &nbsp;&nbsp;&nbsp; † Equal contribution</span>
</div>

<!-- 增加垂直空隙用于排版美观 -->
<div style="height: 24px;"></div>

<!-- 论文展示区域 -->
<div class="publications" style="max-width: 900px; margin: auto; font-size: 14px; line-height: 1.5;">
  <ol class="bibliography" style="padding-left: 0; margin-bottom: 3px;">

    <!-- 遍历 publications 数据中的 main 字段（通常是列表） -->
    {% for link in site.data.publications.main %}
    <li style="list-style: none; margin-bottom: 10px;">
      <div class="pub-row" style="display: flex; flex-wrap: wrap; align-items: stretch; min-height: 140px; background-color: #f8f9fa; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border-radius: 8px; padding: 10px 20px;">
        
        <!-- 左侧图片区域 -->
        <div class="col-sm-3 abbr" style="flex: 0 0 25%; padding-right: 20px; display: flex; align-items: flex-start; justify-content: center; height: 140px;">
          {% if link.image %}
          <img src="{{ link.image }}" style="max-height: 100%; max-width: 100%; object-fit: contain; border-radius: 4px;">
          {% endif %}
        </div>

        <!-- 右侧论文信息区域 -->
        <div class="col-sm-9" style="flex: 1;">
          
          <!-- 论文标题（点击跳转 PDF 链接） -->
          <div class="title" style="font-weight: 600; font-size: 19px;">
            <a href="./assets/papers/{{ link.pdf }}" style="color: #3498db; text-decoration: none;">{{ link.title }}</a>
          </div>

          <!-- 作者列表 -->
          <div class="author" style="margin-top: 8px; font-size: 14px;">{{ link.authors }}</div>

          <!-- 发表会议或期刊信息 -->
          <div class="periodical" style="margin-top: 6px; font-style: italic; font-size: 14px;">{{ link.conference }}</div>

          <!-- 按钮区域（Abstract / BibTex / PDF / GitHub） -->
          <div class="links" style="margin-top: 10px; display: flex; flex-wrap: wrap; gap: 8px;">

            <!-- Abstract 按钮 -->
            {% if link.abstract %}
            <button onclick="toggleContent(this, 'abstract')" 
                    style="font-size: 14px; padding: 3px 8px; background-color: #0056b3; color: white; border: none; border-radius: 3px; cursor: pointer;">
              Abstract
            </button>
            {% endif %}

            <!-- BibTex 按钮 -->
            {% if link.bibtex %}
            <button onclick="toggleContent(this, 'bibtex')" 
                    style="font-size: 14px; padding: 3px 8px; background-color: #0056b3; color: white; border: none; border-radius: 3px; cursor: pointer;">
              BibTex
            </button>
            {% endif %}

            <!-- PDF 按钮 -->
            {% if link.pdf %}
            <a href="./assets/papers/{{ link.pdf }}" class="btn btn-sm z-depth-0" role="button" target="_blank"
              style="font-size: 14px; padding: 3px 8px; background-color: #0056b3; color: white; border: none; border-radius: 3px; text-decoration: none;">PDF</a>
            {% endif %}

            <!-- GitHub 按钮 -->
            {% if link.code %}
            <a href="{{ link.code }}" class="btn btn-sm z-depth-0" role="button" target="_blank"
              style="font-size: 14px; padding: 3px 8px; background-color: #0056b3; color: white; border: none; border-radius: 3px; text-decoration: none;">GitHub</a>
            {% endif %}
          </div>

          <!-- Abstract 展开内容区域 -->
          {% if link.abstract %}
          <div class="abstract-content" style="display: none; margin-top: 10px; margin-right: 15px; background: #eef3f7; padding: 8px 10px; border-radius: 4px; font-size: 14px; line-height: 1.4; text-align: justify;">
            {{ link.abstract }}
          </div>
          {% endif %}

          <!-- BibTex 展开内容区域 -->
          {% if link.bibtex %}
          <pre class="bibtex-content" style="display: none; margin-top: 5px; margin-right: 15px; background: #eef3f7; padding: 8px 10px; border-radius: 4px; font-size: 14px; line-height: 1.4; white-space: pre-wrap;">
            {{- link.bibtex | safe -}}
          </pre>
          {% endif %}
        </div>
      </div>
    </li>
    {% endfor %}
  </ol>
</div>

<!-- 折叠切换功能：点击按钮显示或隐藏 Abstract / BibTex 内容 -->
<script>
function toggleContent(button, type) {
  const container = button.closest('.pub-row');
  const abstractBox = container.querySelector('.abstract-content');
  const bibtexBox = container.querySelector('.bibtex-content');

  if (type === 'abstract') {
    if (abstractBox.style.display === 'none') {
      abstractBox.style.display = 'block';
      if (bibtexBox) bibtexBox.style.display = 'none'; // 关闭另一个
    } else {
      abstractBox.style.display = 'none';
    }
  } else if (type === 'bibtex') {
    if (bibtexBox.style.display === 'none') {
      bibtexBox.style.display = 'block';
      if (abstractBox) abstractBox.style.display = 'none'; // 关闭另一个
    } else {
      bibtexBox.style.display = 'none';
    }
  }
}
</script>
